var S=Object.defineProperty;var b=(s,e,t)=>e in s?S(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var o=(s,e,t)=>(b(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();function B(s){switch(s){case 37:return"left";case 38:return"up";case 39:return"right";case 40:return"down";case 32:return"pause";default:return"other"}}const m=10,k=400,I=400,O=k/m,E=I/m,u={blockSize:m,width:k,height:I,widthInBlocks:O,heightInBlocks:E};Object.freeze(u);function A(){const s=document.createElement("canvas");return s.id="canvas",s.width=400,s.height=400,s.style.border="1px solid black",document.body.appendChild(s),{canvas:s,getContext(){return s.getContext("2d")},clean(){s.getContext("2d").clearRect(0,0,400,400)}}}function $(s){function e(n,i,c,{fillStyle:d,strokeStyle:f="Black"}={}){s.beginPath(),s.arc(n,i,c,0,Math.PI*2,!1),d?(s.fillStyle=d,s.fill()):(s.strokeStyle=f,s.stroke())}function t(n,i){s.lineWidth=2,e(n,i,8,{fillStyle:"Gold"}),e(n,i,8),e(n-5,i-11,5),e(n+5,i-11,5),e(n-2,i-1,2),e(n-2,i-1,1,{fillStyle:"#EAEAEA"}),e(n+2,i-1,2),e(n+2,i-1,1,{fillStyle:"#EAEAEA"})}return{circle:e,bee:t}}const{blockSize:a}=u;class l{constructor(e,t){o(this,"x");o(this,"y");this.x=e,this.y=t}drawSquare(e="Black"){const t=r.canvas.getContext();t.fillStyle=e,t.fillRect(this.x*a,this.y*a,a,a)}drawCircle(e="Black"){const t=r.canvas.getContext(),n=this.x*a+a/2,i=this.y*a+a/2;$(t).circle(n,i,a/2,{fillStyle:e})}equals(e){return this.x===e.x&&this.y===e.y}static create(e,t){return new l(e,t)}}const{widthInBlocks:q,heightInBlocks:P}=u;function x(){const s=Math.floor(Math.random()*(q-2))+1,e=Math.floor(Math.random()*(P-2))+1;return[s,e]}class v{constructor(e=l.create(...x())){o(this,"position");this.position=e}draw(){this.position.drawCircle("LimeGreen")}move(){this.position=l.create(...x())}static create(){return new v}}const{widthInBlocks:R,heightInBlocks:z}=u;class w{constructor(e){o(this,"segments",[l.create(7,5),l.create(6,5),l.create(5,5)]);o(this,"direction","right");o(this,"nextDirection","right");o(this,"gameOver");this.gameOver=e}draw(){this.segments[0].drawSquare("darkblue"),this.segments.slice(1,this.segments.length).forEach(e=>e.drawSquare("blue"))}checkCollision(e){const t=e.x===0,n=e.y===0,i=e.x===R-1,c=e.y===z-1,d=t||n||i||c;let f=!1;return this.segments.forEach(C=>{e.equals(C)&&(f=!0)}),d||f}setNextDirection(e){if(!(this.direction==="up"&&e==="down")){{if(this.direction==="right"&&e==="left")return;if(this.direction==="down"&&e==="up")return;if(this.direction==="left"&&e==="right")return}this.nextDirection=e}}move(e){const t=this.segments[0];this.direction=this.nextDirection;let n;if(this.direction==="right"?n=l.create(t.x+1,t.y):this.direction==="down"?n=l.create(t.x,t.y+1):this.direction==="left"?n=l.create(t.x-1,t.y):n=l.create(t.x,t.y-1),this.checkCollision(n)){this.gameOver();return}this.segments.unshift(n),n.equals(e.position)?(r.score++,e.move(),r.speed-=5,clearInterval(r.intervalId),r.intervalId=setInterval(r.paint.bind(this),r.speed)):this.segments.pop()}static create(e){return new w(e)}}const{width:p,blockSize:h,height:g}=u;class y{constructor(){o(this,"canvas",A());o(this,"score",0);o(this,"speed",100);o(this,"paused",!1);o(this,"apple",v.create());o(this,"snake",w.create(()=>{this.drawGameOver(r.intervalId)}));o(this,"intervalId");o(this,"paint",()=>{this.canvas.clean(),this.drawScore(),this.snake.move(this.apple),this.snake.draw(),this.apple.draw(),this.drawBorder()})}static create(){return new y}drawBorder(){const e=this.canvas.getContext();e.fillStyle="Gray",e.fillRect(0,0,p,h),e.fillRect(0,g-h,p,h),e.fillRect(0,0,h,g),e.fillRect(p-h,0,h,g)}drawScore(){const e=this.canvas.getContext();e.font="20px Courier",e.fillStyle="Black",e.textAlign="left",e.textBaseline="top",e.fillText(`Score: ${r.score}`,h,h)}drawGameOver(e){clearInterval(e);const t=this.canvas.getContext();t.font="60px Courier",t.fillStyle="Black",t.textAlign="center",t.textBaseline="middle",t.fillText("Game Over",p/2,g/2)}init(){this.intervalId=setInterval(r.paint.bind(this),r.speed),document.body.onkeydown=e=>{const t=B(e.keyCode);t==="pause"?r.paused?(r.intervalId=setInterval(r.paint,r.speed),r.paused=!1):(clearInterval(r.intervalId),r.paused=!0):t!=="other"&&r.snake.setNextDirection(t)}}}const r=y.create();r.init();
